# 华恒物流监控仪表盘 - 宝塔部署指南

## 1. 上传项目文件

将整个 `node_dashboard` 文件夹上传到宝塔面板的网站目录，例如：
```
/www/wwwroot/plc-dashboard/
```

## 2. 安装 Node.js 管理器

1. 在宝塔面板左侧菜单找到 **软件商店**
2. 搜索 **Node.js 版本管理器** 并安装
3. 安装完成后在左侧菜单会出现 **Node.js 项目**

## 3. 创建 Node.js 项目

1. 点击 **Node.js 项目** → **添加项目**
2. 填写项目信息：
   ```
   项目名称：华恒物流监控
   项目路径：/www/wwwroot/plc-dashboard
   启动文件：server.js
   端口：5000
   Node版本：18.x (推荐)
   ```

## 4. 配置环境变量

在项目设置中添加环境变量：
```
PORT=5000
MQTT_BROKER=mqtt://Mqtt.dxiot.liju.cc
NODE_ENV=production
```

## 5. 安装依赖并启动

1. 在项目详情页点击 **模块管理** → **安装模块**
2. 或者使用终端命令：
   ```bash
   cd /www/wwwroot/plc-dashboard
   npm install
   ```
3. 点击 **启动** 按钮

## 6. 配置域名访问（可选）

1. 在 **网站** 中添加站点
2. 域名：你的域名（如 plc.yourdomain.com）
3. 在 **反向代理** 中配置：
   ```
   目标URL：http://127.0.0.1:5000
   ```

## 7. SSL证书（可选）

为了 WebSocket 连接稳定，建议配置 SSL：
1. 在网站设置中申请 Let's Encrypt 证书
2. 强制 HTTPS

## 常见问题

### Q: 启动失败？
A: 检查端口是否被占用，可以修改为其他端口如 5001

### Q: MQTT 连接失败？
A: 确认服务器能访问外网，检查防火墙设置

### Q: 页面无法访问？
A: 检查安全组是否开放对应端口

## 项目管理命令

在宝塔 Node.js 项目管理界面可以：
- **启动/停止/重启** 项目
- **查看日志** 排查问题  
- **性能监控** 查看CPU/内存使用
- **在线编辑** 修改配置
